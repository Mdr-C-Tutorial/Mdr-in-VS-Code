# Mdr in VS Code (C/C++ 单文件运行器)

为 C/C++ 初学和算法刷题而生的一款**零配置、一键运行**的 VS Code 扩展。

忘记繁琐的环境变量配置和复杂的 `tasks.json` 吧！本扩展致力于提供最纯粹、最直接的C语言单文件编译与运行体验。

## ✨ 核心优势

* 🚀 **真正的零配置 (Zero Configuration)**
  * **一键下载编译器**：无需离开 VS Code，通过一条命令即可自动下载并配置好MinGW-w64编译器。
  * **环境隔离**：编译器安装在扩展的私有目录中，不污染系统环境变量，不与您电脑上已有的其他开发环境产生冲突。

* 🖱️ **一键编译与运行 (One-Click Compile & Run)**
  * 在C代码的 `main` 函数上方，会自动出现一个 **[▶ Mdr!]** 按钮。
  * 只需轻轻一点，扩展会自动在集成的终端中完成“编译”和“运行”两个步骤，并显示彩色的编译输出。

* 🧠 **智能的实时诊断 (Smart Diagnostics on Save)**
  * **保存即编译**：每当您按下 `Ctrl+S` 保存文件时，扩展会在后台静默进行语法检查。
  * **即时反馈**：如果代码存在任何错误或警告，会立即以**红色波浪线**的形式在代码编辑器中高亮，鼠标悬停即可查看详细信息。您再也无需为了看一个简单的编译错误而来回切换窗口了。

* 🔒 **内置极度严格的编译选项 (Opinionated Strict Flags)**
  * 我们为您内置了一套极为严格的GCC编译选项（包含 `-Wall`, `-Wextra`, `-Werror`, `-pedantic`, `-Wshadow`, `-Wmisleading-indentation` 等20多项）。
  * 这会强制您编写更规范、更健壮、更具可移植性的高质量 C 代码，帮助您从一开始就养成良好的编程习惯。

## 🚀 快速上手

1. **安装扩展**
    * 在VS Code的扩展商店中搜索 `Mdr in VS Code` 并点击安装。

2. **下载并配置编译器 (仅需一次)**
    * 首次点击 **[▶ Mdr!]** 按钮时，右下角会弹出下载编译器的弹窗。
    * 在右下角等待编译器自动下载并解压完成。

3. **编写并运行您的第一个程序**
    * 创建一个新文件，例如 `hello.c`。
    * 输入以下代码：

        ```c
        #include <stdio.h>

        int main() {
            printf("Hello, Mdr in VS Code!\n");
            return 0;
        }
        ```

    * 您会看到 `int main()` 上方出现了 **[▶ Mdr!]** 按钮。
    * 点击它！底部的终端会弹出并显示程序的输出结果。

4. **体验实时诊断**
    * 尝试在代码中写一个错误，例如 `prntf("...");`。
    * 按下 `Ctrl+S` 保存文件。
    * 观察 `prntf`下方出现的红色波浪线和“问题”面板中的错误提示。

## 📖 功能详解

### 保存时自动诊断

本扩展会监听文件的保存事件。一旦源文件被保存，它会立即在后台检查您的代码。任何问题都会实时更新到VS Code的UI上。

### 点击时终端运行

当您点击 **[▶ Mdr!]** 按钮时，扩展会执行以下操作：

1. 自动保存当前文件。
2. 创建一个新的集成终端，名为 “Mdr Runner”。
3. 向终端发送一个完整的命令，该命令会：
    * 使用内置的编译器和所有严格选项来编译您的源文件，生成一个同名的 `.exe` 可执行文件。
    * 如果编译成功，则立即运行这个 `.exe` 文件。
    * 如果编译失败，终端会显示来自GCC的、彩色的、原始的错误输出。

## ⌨️ 命令列表

您可以通过 `Ctrl+Shift+P` 打开命令面板来使用以下命令：

| 命令                                | 描述                                                   |
| ----------------------------------- | ------------------------------------------------------ |
| `C Runner: 下载并配置 C/C++ 编译器` | 自动下载并设置扩展所需的MinGW-w64编译器。              |
| `C Runner: 显示编译器安装路径`      | 显示编译器被安装到的扩展私有目录的绝对路径，方便调试。 |

## 📝 许可证 (License)

本项目使用 [MIT License](./LICENSE) 开源。
